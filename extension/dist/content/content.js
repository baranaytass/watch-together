(()=>{"use strict";new class{constructor(){this.currentProvider=null,this.initialize()}initialize(){chrome.runtime.onMessage.addListener(((e,i,r)=>{"INITIALIZE_SESSION"===e.action&&this.initializeSession()})),this.detectProvider()}detectProvider(){const e=window.location.hostname;chrome.runtime.sendMessage({action:"CHECK_PROVIDER_VALIDITY",data:{domain:e}},(e=>{e.isValid?this.currentProvider=e.provider:this.currentProvider=null}))}async initializeSession(){if(this.currentProvider)try{if(!document.querySelector("video"))throw new Error("Video element not found");await chrome.runtime.sendMessage({action:"CREATE_SESSION",data:{provider:this.currentProvider,url:window.location.href,title:document.title}})}catch(e){console.error("Failed to initialize session:",e)}else console.error("No supported video provider detected")}}})();