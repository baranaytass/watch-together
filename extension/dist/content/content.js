(()=>{"use strict";const e=[{domain:"youtube.com",name:"YouTube",selector:"video.html5-main-video"},{domain:"vimeo.com",name:"Vimeo",selector:"video"}];new class{constructor(){this.currentProvider=null,this.initialize()}initialize(){chrome.runtime.onMessage.addListener(((e,i,o)=>{"INITIALIZE_SESSION"===e.action&&this.initializeSession()})),this.detectProvider()}detectProvider(){const i=window.location.hostname;this.currentProvider=e.find((e=>i.includes(e.domain)))||null}async initializeSession(){if(this.currentProvider)try{if(!document.querySelector(this.currentProvider.selector))throw new Error("Video element not found");await chrome.runtime.sendMessage({action:"CREATE_SESSION",data:{provider:this.currentProvider.name,url:window.location.href,title:document.title}})}catch(e){console.error("Failed to initialize session:",e)}else console.error("No supported video provider detected")}}})();